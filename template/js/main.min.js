document.addEventListener("DOMContentLoaded",function(){const r=document.querySelector(".header__nav"),d=document.querySelector(".header__menu");function t(e){const t=d.querySelectorAll("li");var n=e.currentTarget.classList.contains("header__menu-prev")?"prev":"next";let i;var l,c=[r.getBoundingClientRect().left,r.getBoundingClientRect().width+r.getBoundingClientRect().left];for(i=0;i<t.length;i++){var o=[t[i].getBoundingClientRect().left,t[i].getBoundingClientRect().width+t[i].getBoundingClientRect().left];if("prev"==n&&c[0]<=o[0]){i--;break}if("next"==n&&c[1]<o[1])break}r.querySelectorAll(".header__menu-slide").forEach(e=>e.classList.remove("disabled")),(!t[i+1]&&"next"==n||!t[i-1]&&"prev"==n)&&r.querySelector(".header__menu-"+n).classList.add("disabled"),t[i]&&(e=new WebKitCSSMatrix(window.getComputedStyle(d).transform).m41,d.style.transform=`translateX(${e+(e=t[i],l=[r.getBoundingClientRect().left,r.getBoundingClientRect().width+r.getBoundingClientRect().left],e=[e.getBoundingClientRect().left,e.getBoundingClientRect().width+e.getBoundingClientRect().left],e[0]<l[0]?l[0]-e[0]+60:-1*(e[1]-l[1]+60))}px)`)}r.querySelectorAll(".header__menu-slide").forEach(e=>e.addEventListener("click",t));const e=document.querySelector(".header__search"),l=document.querySelector(".header__search-results"),c=l.querySelector("ul"),n=(e.addEventListener("input",async function(t){l.classList.add("visible"),l.classList.remove("loaded"),c.innerHTML="";const e=await fetch("https://jsonplaceholder.typicode.com/todos");let n=await e.json();l.classList.add("loaded");const i=n.filter(e=>e.title.includes(t.target.value));0==i.length&&(c.innerHTML='<li style="text-align:center">Нет результатов.<br><a href="https://jsonplaceholder.typicode.com/todos">JSON отсюда</a></li>'),i.forEach(e=>c.innerHTML+=`<li>${e.title}</li>`)}),document.querySelector(".header__city-choose")),i=document.querySelector(".city__search-wrapper"),o=document.querySelector(".city__list"),a=document.querySelector(".city__selected"),s=document.querySelector(".city__search");let u=!1;n.addEventListener("click",async function(){if(i.classList.toggle("visible"),!u){u=!0,o.innerHTML="",i.classList.add("loading");const t=await fetch("https://jsonplaceholder.typicode.com/todos");let e=await t.json();i.classList.remove("loading"),e.forEach(e=>o.innerHTML+=`<li data-id="${e.id}">${e.title}</li>`);const n=o.querySelectorAll("li");n.forEach(t=>{t.addEventListener("click",function(){t.classList.toggle("active");const e=a.querySelector('li[data-id="'+t.dataset.id+'"]');e?e.remove():a.innerHTML+=`<li data-id="${t.dataset.id}">${t.innerText}<i class="icon icon-close"></i></li>`,a.querySelectorAll("li").forEach(e=>{e.addEventListener("click",function(){e.remove(),o.querySelector('li[data-id="'+e.dataset.id+'"]').classList.remove("active")})})})})}}),s.addEventListener("input",function(t){o.querySelectorAll("li").forEach(e=>{e.classList.remove("hidden"),e.innerText.includes(t.target.value)||e.classList.add("hidden")})});const g=document.querySelector(".menu-toggle"),h=document.querySelector(".mobile-close"),m=document.querySelector(".mobile-menu");function y(){m.classList.toggle("visible")}g.addEventListener("click",y),h.addEventListener("click",y)});